# External Elasticsearch backend configuration for 8.8
# Layer 3: Backend - Elasticsearch (external)
#
# This layer configures an external Elasticsearch instance instead of the
# bundled one. Used by scenarios like keycloak-original that need external ES.

global:
  elasticsearch:
    enabled: true
    external: true
    prefix: $ORCHESTRATION_INDEX_PREFIX-$FLOW
    auth:
      username: elastic
      secret:
        existingSecret: infra-credentials
        existingSecretKey: elasticsearch-password
    url:
      protocol: https
      host: elasticsearch-21-6-3-selfsigned.ci.distro.ultrawombat.com
      port: 443
    tls:
      enabled: true
      existingSecret: elasticsearch-jks
      jks:
        secret:
          existingSecret: elasticsearch-jks
          existingSecretKey: truststore-password

optimize:
  env:
    - name: CAMUNDA_OPTIMIZE_ELASTICSEARCH_SETTINGS_INDEX_PREFIX
      value: $OPTIMIZE_INDEX_PREFIX-$FLOW
    - name: CAMUNDA_OPTIMIZE_ZEEBE_NAME
      value: $ORCHESTRATION_INDEX_PREFIX-$FLOW

orchestration:
  index:
    prefix: $ORCHESTRATION_INDEX_PREFIX-$FLOW

elasticsearch:
  enabled: false
