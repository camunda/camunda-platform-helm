{{- if .Values.core.migration.process.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "identity.fullname" . }}-migration-configuration
data:
  application.yaml: |
    spring:
      profiles:
        active: process-migration
    camunda:
      database:
        username: ${VALUES_DATABASE_USERNAME:}
        password: ${VALUES_DATABASE_PASSWORD:}
      migration:
        process:
          batch-size: 5
          import-finished-timeout: PT1M
          retry:
            max-retries: 5
            max-retry-delay: PT1M
            min-retry-delay: PT10S
            retry-delay-multiplier: 2.0
{{- end }}
